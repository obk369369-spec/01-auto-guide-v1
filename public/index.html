<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>1번 고객 자동화 안내서 · v1.0 Skeleton</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f7;
      color: #222;
    }
    header {
      background: #1f2937;
      color: #f9fafb;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 18px;
    }
    header span {
      font-size: 12px;
      opacity: 0.8;
    }
    main {
      padding: 16px;
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      gap: 16px;
      grid-template-columns: 1.2fr 1.8fr;
    }
    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }
    }
    .card {
      background: #ffffff;
      border-radius: 10px;
      padding: 12px 14px;
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.08);
    }
    .card h2 {
      margin: 0 0 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .badge {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #374151;
    }
    .small {
      font-size: 12px;
      color: #6b7280;
    }
    .row {
      display: flex;
      gap: 10px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    .row > * {
      flex: 1;
      min-width: 0;
    }
    label {
      font-size: 12px;
      display: block;
      margin-bottom: 4px;
      color: #4b5563;
    }
    input[type="text"],
    input[type="email"],
    textarea,
    select {
      width: 100%;
      padding: 6px 8px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      font-size: 13px;
    }
    textarea {
      resize: vertical;
      min-height: 160px;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      background: #2563eb;
      color: #f9fafb;
    }
    button.secondary {
      background: #e5e7eb;
      color: #111827;
    }
    button:disabled {
      opacity: 0.5;
      cursor: default;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
      margin-top: 6px;
    }
    th, td {
      padding: 6px 4px;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
    }
    th {
      background: #f3f4f6;
      font-weight: 600;
      font-size: 11px;
    }
    tr.clickable {
      cursor: pointer;
    }
    tr.clickable:hover {
      background: #eff6ff;
    }
    .pill {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 10px;
      background: #e0f2fe;
      color: #0369a1;
      margin-right: 4px;
    }
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      display: inline-block;
      margin-right: 4px;
      background: #9ca3af;
    }
    .status-dot.ok { background: #22c55e; }
    .status-dot.warn { background: #eab308; }
    .status-dot.err { background: #ef4444; }
    .section-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .log-area {
      font-size: 11px;
      background: #0b1120;
      color: #e5e7eb;
      border-radius: 6px;
      padding: 8px;
      max-height: 150px;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    .tag {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid #cbd5f5;
      color: #4b5563;
      margin-right: 4px;
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>1번 고객 자동화 안내서 · v1.0 Skeleton</h1>
      <span>오프라인·온라인 고객 데이터 → 안내서 생성 → 메일·사후조치까지 한 흐름을 위한 화면 뼈대</span>
    </div>
    <div style="text-align:right;">
      <span class="small">엔진 단계: 화면 뼈대 · 테스트용 더미 데이터</span><br />
      <span class="small">다음 단계: 실제 데이터 연동 · 메일 연동 · 사후 조치 자동화</span>
    </div>
  </header>

  <main>
    <!-- 왼쪽: 고객 선택 + 데이터 영역 -->
    <section class="card">
      <h2>① 고객 데이터 · 선택 영역 <span class="badge">데이터 뼈대</span></h2>
      <p class="small">
        아래 목록은 더미 예시입니다. 나중에 엑셀/DB/7번 세팅 도구 등에서 자동으로 불러오도록 연결할 수 있습니다.
      </p>

      <div class="row">
        <div>
          <label>검색어 (이름, 기관, 분야)</label>
          <input type="text" id="searchInput" placeholder="예: KITECH, 접착제, 홍길동" />
        </div>
        <div>
          <label>관심 분야 필터</label>
          <select id="fieldFilter">
            <option value="">전체</option>
            <option value="접착제">접착제</option>
            <option value="반도체 패키징">반도체 패키징</option>
            <option value="에너지 소재">에너지 소재</option>
          </select>
        </div>
      </div>

      <table>
        <thead>
          <tr>
            <th>이름</th>
            <th>기관</th>
            <th>연구 분야</th>
            <th>관심</th>
          </tr>
        </thead>
        <tbody id="customerTableBody">
          <!-- JS에서 채움 -->
        </tbody>
      </table>

      <p class="small">
        행을 클릭하면 오른쪽에 안내서 초안이 자동으로 채워집니다.
      </p>
    </section>

    <!-- 오른쪽: 안내서 생성 + 메일·사후 조치 -->
    <section class="card">
      <h2>② 안내서 생성 · 메일 · 사후 조치 <span class="badge">안내서 뼈대</span></h2>

      <div class="row">
        <div>
          <div class="section-title">선택된 고객 정보</div>
          <div id="selectedCustomerBox" class="small" style="border:1px solid #e5e7eb;border-radius:6px;padding:6px;min-height:60px;">
            아직 선택된 고객이 없습니다.
          </div>
          <div style="margin-top:6px;">
            <span class="tag">워드 안내서</span>
            <span class="tag">메일 연동(예정)</span>
            <span class="tag">사후 조치(예정)</span>
          </div>
        </div>
        <div>
          <label>안내서 템플릿 유형 (예시)</label>
          <select id="templateType">
            <option value="기본">기본 안내서</option>
            <option value="신규 고객">신규 고객용</option>
            <option value="장기 고객">장기 고객용</option>
          </select>
        </div>
      </div>

      <div style="margin-top:10px;">
        <label>안내서 초안 (워드 자동화 안내서 대상 내용 · 예시)</label>
        <textarea id="guideDraft" placeholder="고객을 선택하면 여기에 초안이 자동으로 채워집니다."></textarea>
      </div>

      <div class="row" style="margin-top:10px;">
        <div>
          <label>받는 사람 이메일 (예시)</label>
          <input type="email" id="emailInput" placeholder="예: name@기관.kr" />
        </div>
        <div>
          <label>사후 조치 계획 메모 (예시)</label>
          <input type="text" id="followupInput" placeholder="예: 2주 후 재문의, 후속 보고서 제안" />
        </div>
      </div>

      <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
        <button id="btnCreateDraft">안내서 초안 다시 생성</button>
        <button id="btnMarkAsSent" class="secondary" disabled>메일 발송 처리(예시)</button>
        <button id="btnMarkFollowup" class="secondary" disabled>사후 조치 등록(예시)</button>
      </div>

      <div style="margin-top:10px;">
        <div class="section-title">
          발송·사후 조치 상태 요약
          <span class="status-dot ok"></span><span class="small">기본 상태(예시)</span>
        </div>
        <div id="statusSummary" class="small">
          아직 발송·사후 조치 기록이 없습니다. 위 버튼을 눌러 흐름을 테스트해 볼 수 있습니다. (현재는 화면 뼈대용 더미 동작만 포함)
        </div>
      </div>

      <div style="margin-top:10px;">
        <div class="section-title">로그 (테스트용 · 화면 뼈대)</div>
        <div id="logArea" class="log-area">
[안내] 화면 뼈대가 로드되었습니다.
여기에 "안내서 생성 / 메일 발송 / 사후 조치" 흐름 로그가 쌓이도록 확장할 수 있습니다.
        </div>
      </div>
    </section>
  </main>

  <script>
    // --- 더미 고객 데이터 (나중에 실제 데이터 소스로 교체 가능) ---
    const customers = [
      {
        id: 1,
        name: "홍길동",
        org: "KITECH",
        field: "접착제",
        interest: "Glass Substrate 접착제",
        email: "hong@kitech.re.kr"
      },
      {
        id: 2,
        name: "김연구",
        org: "KRICT",
        field: "에너지 소재",
        interest: "전고체 전지 소재",
        email: "kim@krict.re.kr"
      },
      {
        id: 3,
        name: "이박사",
        org: "대학 연구소",
        field: "반도체 패키징",
        interest: "LSI 패키징용 접착제",
        email: "lee@univ.ac.kr"
      }
    ];

    const tableBody = document.getElementById("customerTableBody");
    const searchInput = document.getElementById("searchInput");
    const fieldFilter = document.getElementById("fieldFilter");
    const selectedCustomerBox = document.getElementById("selectedCustomerBox");
    const templateType = document.getElementById("templateType");
    const guideDraft = document.getElementById("guideDraft");
    const emailInput = document.getElementById("emailInput");
    const followupInput = document.getElementById("followupInput");
    const btnCreateDraft = document.getElementById("btnCreateDraft");
    const btnMarkAsSent = document.getElementById("btnMarkAsSent");
    const btnMarkFollowup = document.getElementById("btnMarkFollowup");
    const statusSummary = document.getElementById("statusSummary");
    const logArea = document.getElementById("logArea");

    let selectedCustomer = null;

    function renderCustomers() {
      const keyword = (searchInput.value || "").toLowerCase();
      const field = fieldFilter.value;
      tableBody.innerHTML = "";

      customers
        .filter(c => {
          const text =
            (c.name + " " + c.org + " " + c.field + " " + c.interest).toLowerCase();
          const matchKeyword = !keyword || text.includes(keyword);
          const matchField = !field || c.field === field;
          return matchKeyword && matchField;
        })
        .forEach(c => {
          const tr = document.createElement("tr");
          tr.className = "clickable";
          tr.innerHTML = `
            <td>${c.name}</td>
            <td>${c.org}</td>
            <td>${c.field}</td>
            <td>${c.interest}</td>
          `;
          tr.addEventListener("click", () => selectCustomer(c));
          tableBody.appendChild(tr);
        });

      if (!tableBody.children.length) {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td colspan="4" class="small" style="text-align:center;color:#9ca3af;">검색 조건에 맞는 고객이 없습니다.</td>`;
        tableBody.appendChild(tr);
      }
    }

    function selectCustomer(c) {
      selectedCustomer = c;
      selectedCustomerBox.innerHTML = `
        <div><strong>${c.name}</strong> (${c.org})</div>
        <div class="small">
          연구 분야: ${c.field}<br/>
          관심 주제: ${c.interest}<br/>
          기본 이메일: ${c.email || "-"}
        </div>
      `;
      emailInput.value = c.email || "";
      createDraft();
      appendLog(`[선택] 고객 선택: ${c.name} / ${c.org}`);
      btnMarkAsSent.disabled = false;
      btnMarkFollowup.disabled = false;
    }

    function createDraft() {
      if (!selectedCustomer) {
        guideDraft.value = "먼저 고객을 선택해 주세요.";
        return;
      }
      const t = templateType.value;
      const c = selectedCustomer;
      guideDraft.value =
`[${t}] ${c.org} ${c.name} 귀하

안녕하십니까.
월드산업정보센터에서 ${c.field} 및 "${c.interest}" 분야 자료를 담당하고 있습니다.

이번에 안내드리는 보고서/자료는 귀하의 연구 주제와 밀접한 내용을 포함하고 있으며,
필요 시 추가 자료(목차, 샘플, 가격 정보)도 함께 보내드릴 수 있습니다.

관심 있으신 경우 짧게 회신 주시면,
${c.field} / ${c.interest} 관련 맞춤형 자료를 정리하여 다시 안내드리겠습니다.

감사합니다.
월드산업정보센터 드림`;
      appendLog(`[생성] 안내서 초안 생성: ${c.name} (${t})`);
    }

    function appendLog(text) {
      const now = new Date();
      const time = now.toTimeString().slice(0, 8);
      logArea.textContent += `\n[${time}] ${text}`;
      logArea.scrollTop = logArea.scrollHeight;
    }

    searchInput.addEventListener("input", renderCustomers);
    fieldFilter.addEventListener("change", renderCustomers);
    templateType.addEventListener("change", () => {
      if (selectedCustomer) createDraft();
    });

    btnCreateDraft.addEventListener("click", () => {
      createDraft();
    });

    btnMarkAsSent.addEventListener("click", () => {
      if (!selectedCustomer) return;
      appendLog(`[발송 처리(예시)] ${selectedCustomer.name} / ${emailInput.value || "(이메일 미입력)"}`);
      statusSummary.textContent =
        `최근 처리: ${selectedCustomer.name}에게 안내서 발송 처리(예시). 이후 단계에서 실제 메일 시스템과 연결할 수 있습니다.`;
    });

    btnMarkFollowup.addEventListener("click", () => {
      if (!selectedCustomer) return;
      appendLog(`[사후 조치(예시)] ${selectedCustomer.name} / 계획: ${followupInput.value || "(미입력)"}`);
      statusSummary.textContent =
        `최근 처리: ${selectedCustomer.name}에 대한 사후 조치 계획 저장(예시). 나중에 7번 도구·재무/재테크 도구와도 연동할 수 있습니다.`;
    });

    // 초기 렌더
    renderCustomers();
  </script>
</body>
</html>
